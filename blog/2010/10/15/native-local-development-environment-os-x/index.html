
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Native local development environment in OS X - alanthing</title>
  <meta name="author" content="Alan Ivey">

  
  <meta name="description" content="UPDATE: A newer version of this has been posted here. Apple OS X comes with Apache and PHP built-in but need some tweaking to work. It also does not &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://alanthing.com/blog/2010/10/15/native-local-development-environment-os-x">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="alanthing" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-34327970-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">alanthing</a></h1>
  
    <h2>Linux and other things</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:alanthing.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Native Local Development Environment in OS X</h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-10-15T14:46:00-04:00" pubdate data-updated="true">Oct 15<span>th</span>, 2010</time>
        
      </p>
    
  </header>


<div class="entry-content"><p><strong>UPDATE:</strong> <a href="/blog/2011/08/24/os-x-107-lion-development-native-mamp-mysql-installer/">A newer version of this has been posted here</a>.</p>

<p>Apple OS X comes with Apache and PHP built-in but need some tweaking to work. It also does not come with MySQL. Because of this, many developers have chosen to use MacPorts, Homebrew, or MAMP to install new binaries for Apache, PHP, and MySQL. However, doing this means your system would have multiple copies of Apache and PHP on your machine, and could create conflicts depending on how your built-in tools are configured. This tutorial will show you how to get the built-in versions of Apache and PHP running with an easy to install version of MySQL.</p>

<p>Additionally, it will show how to set up and install Drush, and phpMyAdmin. Setting up a new website is as easy as editing a single text file and adding a line to your <em>/etc/hosts</em> file. All of our changes will avoid editing default configuration files, either those provided by Apple in OS X or from downloaded packages, so that future updates will not break our customizations.</p>

<h2>Apache</h2>

<ul>
<li>Apple uses what appears to be the FreeBSD &ldquo;version&rdquo; of Apache 2.2, and includes various sample files. One of the sample files is a virtual hosts file that we will copy to our <em>~/Sites</em> folder for easy editing. Launch the terminal and get started:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>cp /etc/apache2/extra/httpd-vhosts.conf ~/Sites
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>In order to prevent future major OS updates from breaking our configuration, we&rsquo;ll be editing as few existing files as possible. Luckily, by default, OS X&rsquo;s <em>httpd.conf</em> file (the main configuration file for Apache) includes all <em>.conf files in another folder, </em>/etc/apache2/other*:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>tail -1 /etc/apache2/httpd.conf
</span><span class='line'>Include /private/etc/apache2/other/*.conf
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>We then create a symbolic link in <em>/etc/apache2/other</em> to our newly-copied <em>httpd-vhosts.conf</em> from our <em>~/Sites</em> folder:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo ln -s ~/Sites/httpd-vhosts.conf /etc/apache2/other
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>The <em>~/Sites/httpd-vhosts.conf</em> is now where we will add all new virtual hosts. We will place our site root folders in <em>~/Sites</em> and define them in this file. But first, we need to make some changes (or, <a href="http://www.echoditto.com/sites/default/files/labs/httpd-vhosts.conf_.txt">download this edited httpd-vhosts.conf file</a> and change <strong>fname</strong> in <strong>/Users/fname</strong> to the appropriate path for your system). Begin by adding this text to the top of the file, which will enable the <em>~/Sites</em> folder and subfolders to be accessed by Apache (again, replace <em>/Users/fname</em> with your appropriate path for home directory):</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># Ensure all of the VirtualHost directories are listed below</span>
</span><span class='line'>&lt;Directory <span class="s2">&quot;/Users/fname/Sites&quot;</span>&gt;
</span><span class='line'>    Options Indexes FollowSymLinks MultiViews
</span><span class='line'>    AllowOverride All
</span><span class='line'>    Order allow,deny
</span><span class='line'>    Allow from all
</span><span class='line'>&lt;/Directory&gt;
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Add these lines anywhere in the file to ensure that <a href="http://localhost">http://localhost</a> still serves the default folder:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># For localhost in the OS X default location</span>
</span><span class='line'>&lt;VirtualHost _default_:80&gt;
</span><span class='line'>  ServerName localhost
</span><span class='line'>  DocumentRoot /Library/WebServer/Documents
</span><span class='line'>&lt;/VirtualHost&gt;&lt;/code&gt;
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>We will cover setting up a Virtual Host later, so let&rsquo;s reload our Apache settings to activate our new configuration:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo apachectl graceful
</span></code></pre></td></tr></table></div></figure>


<p>Or, go to the <strong>Sharing Preference Pane</strong> and uncheck/[re]check the <strong>Web Sharing</strong> item to stop and start Apache.</p>

<p><img src="http://www.echoditto.com/sites/default/files/1Sharing-1.jpg" alt="Sharing" /></p>

<h2>PHP</h2>

<ul>
<li>As of OS X 10.6.6, OS X ships with PHP 5.3.3, but it is not enabled in Apache by default. By looking at <em>/etc/apache2/httpd.conf</em>, you can see that the line to load in the PHP module is commented out:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>grep php /etc/apache2/httpd.conf
</span><span class='line'><span class="c">#LoadModule php5_module        libexec/apache2/libphp5.so&lt;/code&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Since we are trying to avoid editing default configuration files where possible, we can add this information, along with the configuration to allow <em>.php files to run, without the comment at the beginning of the line, in the same folder that we put the symlink for </em>httpd-vhosts.conf*:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo sh -c <span class="s2">&quot;cat &gt; /etc/apache2/other/php5-loadmodule.conf &lt;&lt;&#39;EOF&#39;</span>
</span><span class='line'><span class="s2">LoadModule php5_module        libexec/apache2/libphp5.so</span>
</span><span class='line'><span class="s2">EOF&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>PHP on OS X does not come with a configuration file at php.ini and PHP runs on its defaults. There is, however, a sample file ready to be copied and edited. The lines below will copy the sample file to <em>/etc/php.ini</em> (optionally, <a href="http://www.echoditto.com/sites/default/files/labs/php.ini_.txt">download the edited file</a> and insert at <em>/etc/php.ini</em>) and add some developer-friendly changes to your configuration.</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo cp -a /etc/php.ini.default /etc/php.ini
</span><span class='line'><span class="nv">$ </span>sudo sh -c <span class="s2">&quot;cat &gt;&gt; /etc/php.ini &lt;&lt;&#39;EOF&#39;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="s2">;;</span>
</span><span class='line'><span class="s2">;; User customizations below</span>
</span><span class='line'><span class="s2">;;</span>
</span><span class='line'>
</span><span class='line'><span class="s2">; Original - memory_limit = 128M</span>
</span><span class='line'><span class="s2">memory_limit = 196M</span>
</span><span class='line'><span class="s2">; Original - post_max_size = 8M</span>
</span><span class='line'><span class="s2">post_max_size = 200M</span>
</span><span class='line'><span class="s2">; Original - upload_max_filesize = 2M</span>
</span><span class='line'><span class="s2">upload_max_filesize = 100M</span>
</span><span class='line'><span class="s2">; Original - default_socket_timeout = 60</span>
</span><span class='line'><span class="s2">default_socket_timeout = 600</span>
</span><span class='line'><span class="s2">; Original - max_execution_time = 30</span>
</span><span class='line'><span class="s2">max_execution_time = 300</span>
</span><span class='line'><span class="s2">; Original - max_input_time = 60</span>
</span><span class='line'><span class="s2">max_input_time = 600</span>
</span><span class='line'><span class="s2">; Original - log_errors = off</span>
</span><span class='line'><span class="s2">log_errors = on</span>
</span><span class='line'><span class="s2">; Original - display_errors = Off</span>
</span><span class='line'><span class="s2">display_errors = on</span>
</span><span class='line'><span class="s2">; Original - display_startup_errors = Off</span>
</span><span class='line'><span class="s2">display_startup_errors = on</span>
</span><span class='line'><span class="s2">; Original - error_reporting = E_ALL &amp; ~E_DEPRECATED</span>
</span><span class='line'><span class="s2">error_reporting = E_ALL &amp; ~E_DEPRECATED &amp; ~E_NOTICE</span>
</span><span class='line'><span class="s2">EOF&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>OS X&rsquo;s PHP does ship with pear and pecl, but they are not in the $PATH, nor are there binaries to add or symlink to your path. The first two commands will perform a channel-update for pear and again for pecl, the second two will add an alias for each for your current session, and the last two will add the aliases permanently to your local environment (you may get PHP Notices that appear to be errors but they are simply notices. You can change error_reporting in <em>php.ini</em> to silence the Notices):</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo php /usr/lib/php/pearcmd.php channel-update pear.php.net
</span><span class='line'><span class="nv">$ </span>sudo php /usr/lib/php/peclcmd.php channel-update pecl.php.net
</span><span class='line'><span class="nv">$ </span><span class="nb">alias </span><span class="nv">pear</span><span class="o">=</span><span class="s2">&quot;php /usr/lib/php/pearcmd.php&quot;</span>
</span><span class='line'><span class="nv">$ </span><span class="nb">alias </span><span class="nv">pecl</span><span class="o">=</span><span class="s2">&quot;php /usr/lib/php/peclcmd.php&quot;</span>
</span><span class='line'><span class="nv">$ </span>cat &gt;&gt; ~/.bashrc <span class="s">&lt;&lt;&#39;EOF&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="s">alias pear=&quot;php /usr/lib/php/pearcmd.php&quot;</span>
</span><span class='line'><span class="s">alias pecl=&quot;php /usr/lib/php/peclcmd.php&quot;</span>
</span><span class='line'><span class="s">EOF</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>We do a lot of Drupal development, and a commonly-added PHP PECL module for Drupal is uploadprogress. With the new alias we just set, adding it is easy. Build the PELC package, add it <em>php.ini</em>, and reload the PHP configuration into Apache:
<sub>Note: PECL modules require a compiler such as gcc to build. Install Xcode to build PECL packages such as uploadprogress.</sub></li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>pecl install uploadprogress
</span><span class='line'><span class="nv">$ </span>sudo sh -c <span class="s2">&quot;cat &gt;&gt; /etc/php.ini &lt;&lt;&#39;EOF&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="s2">; Enable PECL extension uploadprogress</span>
</span><span class='line'><span class="s2">extension=uploadprogress.so</span>
</span><span class='line'><span class="s2">EOF&quot;</span>
</span><span class='line'><span class="nv">$ </span>sudo apachectl graceful
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>If you&rsquo;d like to install APC, see <a href="http://pecl.php.net/bugs/bug.php?id=15968">http://pecl.php.net/bugs/bug.php?id=15968</a> and search for **[2009-09-10 23:16 UTC]**, or if you are using <a href="http://mxcl.github.com/homebrew/">Homebrew</a>, see <a href="http://i.justrealized.com/2010/install-php-apc-mac-os/">http://i.justrealized.com/2010/install-php-apc-mac-os/</a></a>.</li>
</ul>


<h2>MySQL</h2>

<p>MySQL is the only thing that doesn&rsquo;t not ship with OS X that is needed to run a &ldquo;LAMP&rdquo; website like Drupal or WordPress. MySQL/Sun/Oracle provides pre-built MySQL binaries for OS X that don&rsquo;t conflict with other system packages, and even provides a nice System Preferences pane for starting/stopping the process and a checkbox to start MySQL at boot.</p>

<ul>
<li>Go to the download site for OS X pre-built binaries at: <a href="http://dev.mysql.com/downloads/mysql/index.html#macosx-dmg">http://dev.mysql.com/downloads/mysql/index.html#macosx-dmg</a> and choose the most appropriate type for your system. For systems running Snow Leopard, choose <strong>Mac OS X ver. 10.6 (x86, 64-bit), DMG Archive</strong> (on the following screen, you can scroll down for the download links to avoid having to create a user and password).</li>
</ul>


<p><img src="http://www.echoditto.com/sites/default/files/labs/2MySQL%20__%20Download%20MySQL%20Community%20Server.jpg" alt="Download DMG" /></p>

<ul>
<li>Open the downloaded disk image and begin by installing the <strong>mysql-5.1.51-osx10.6-x86_64.pkg</strong> file (or named similarly to the version number you downloaded):</li>
</ul>


<p><img src="http://www.echoditto.com/sites/default/files/labs/3Install%20MySQL%205.1.51-community%20for%20Mac%20OS%20X.jpg" alt="MySQL Installer" /></p>

<p>Once the Installer script is completed, install the Preference Pane by double-clicking on <strong>MySQL.prefPane</strong>. If you are not sure where to install the preference pane, choose &ldquo;Install for this user only&rdquo;:</p>

<p><sub><strong>Note:</strong> If you wish to have MySQL start on boot, check out the <a href="http://stackoverflow.com/questions/1334272/cant-start-mysql-in-mac-os-10-6-snow-leopard">first answer on this Stack Overflow post</a>.</sub></p>

<p><img src="http://www.echoditto.com/sites/default/files/labs/4System%20Preferences.jpg" alt="Install MySQL System Preferences pane" /></p>

<ul>
<li>The preference pane is now installed and you can check the box to have MySQL start on boot or start and stop it on demand with this button. To access this screen again, load System Preferences. Click &ldquo;Start MySQL Server&rdquo; now:</li>
</ul>


<p><img src="http://www.echoditto.com/sites/default/files/5MySQL.jpg" alt="MySQL pane" /></p>

<ul>
<li>The MySQL installer installed its files to /usr/local/mysql, and the binaries are in /usr/local/mysql/bin which is not in the $PATH of any user by default. Rather than edit the $PATH shell variable, we add symbolic links in /usr/local/bin (a location already in $PATH) to a few MySQL binaries. Add more or omit as desired. This is an optional step, but will make tasks like using Drush or performing a mysqldump in the command line much easier:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nb">cd</span> /usr/local/bin
</span><span class='line'>ln -s /usr/local/mysql/bin/mysql
</span><span class='line'>ln -s /usr/local/mysql/bin/mysqladmin
</span><span class='line'>ln -s /usr/local/mysql/bin/mysqldump
</span><span class='line'>ln -s /usr/local/mysql/support-files/mysql.server
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>Next we&rsquo;ll run <code>mysql_secure_installation</code> to set the root user&rsquo;s password and other setup-related tasks. This script ships with MySQL and only needs to be run once, and it should be run with sudo. As you run it, you can accept all other defaults after you set the root user&rsquo;s password:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo /usr/local/mysql/bin/mysql_secure_installation
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>If you were create a simple php file containing &ldquo;phpinfo();&rdquo; to view the PHP Information, you will see that Apple-built PHP looks for the MySQL socket at <em>/var/mysql/mysql.sock</em>:</li>
</ul>


<p><img src="http://www.echoditto.com/sites/default/files/labs/6phpinfo.jpg" alt="phpinfo" /></p>

<p>The problem is that the MySQL binary provided by Oracle puts the socket file in <em>/tmp</em>, which is the standard location on most systems. Other tutorials have recommended rebuilding PHP from source, or changing where PHP looks for the socket file via <em>/etc/php.ini</em>, or changing where MySQL places it when starting via <em>/etc/my.cnf</em>, but it is far easier and more fool-proof to create a symbolic link for <em>/tmp/mysql.sock</em> in the location OS X&rsquo;s PHP is looking for it. Since this keeps us from changing defaults, it ensures that a PHP update (via Apple) or a MySQL update (via Oracle) will not have an impact on functionality:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo mkdir /var/mysql
</span><span class='line'>sudo chown _mysql:wheel /var/mysql
</span><span class='line'>sudo ln -s /tmp/mysql.sock /var/mysql
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>After installing MySQL, several sample my.cnf files are created but none is placed in <em>/etc/my.cnf</em>, meaning that MySQL will always load in the default configuration. Since we will be using MySQL for local development, we will start with a &ldquo;small&rdquo; configuration file and make a few changes to increase the max_allowed_packet variable under <strong>[mysqld]</strong> and <strong>[mysqldump]</strong> (optionally, use the contents of <a href="http://www.echoditto.com/sites/default/files/labs/my.cnf_.txt">this sample file</a> in <em>/etc/my.cnf</em>). Later on, we can edit <em>/etc/my.cnf</em> to make other changes as desired:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>sudo cp /usr/local/mysql/support-files/my-small.cnf /etc/my.cnf
</span><span class='line'>sudo sed -i <span class="s2">&quot;&quot;</span> <span class="s1">&#39;s/max_allowed_packet = 16M/max_allowed_packet = 2G/g&#39;</span> /etc/my.cnf
</span><span class='line'>sudo sed -i <span class="s2">&quot;&quot;</span> <span class="s2">&quot;/\[mysqld\]/ a\\`echo -e &#39;\n\r&#39;`max_allowed_packet = 2G`echo -e &#39;\n\r&#39;`&quot;</span> /etc/my.cnf
</span></code></pre></td></tr></table></div></figure>


<ul>
<li>To load in these changes, go back to the MySQL System Preferences pane, and restart the server by pressing &ldquo;Stop MySQL Server&rdquo; followed by &ldquo;Start MySQL Server.&rdquo; Or, you can do this on the command line (if you added this symlink as shown above):</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo mysql.server restart
</span><span class='line'>
</span><span class='line'>Shutting down MySQL
</span><span class='line'>... SUCCESS!
</span><span class='line'>Starting MySQL
</span><span class='line'>... SUCCESS!
</span></code></pre></td></tr></table></div></figure>


<h2>phpMyAdmin</h2>

<p>At this point, the full &ldquo;MAMP stack&rdquo; (Macintosh OS X, Apache, MySQL, PHP) is ready, but adding phpMyAdmin will make administering your MySQL install easier.</p>

<ul>
<li><p>phpMyAdmin will complain that the PHP extension &lsquo;php-mcrypt&rsquo; is not available. Since you will not likely be allowing anyone other than yourself to use phpMyAdmin, you could ignore it, but if you want to build the extension, it is possible to build it as a shared object instead of having to rebuild PHP from source. Follow Michael Gracie&rsquo;s guide here (for his Step 2, grab the PHP source that matches <code>$ php --version</code> on your system): <a href="http://michaelgracie.com/2009/09/23/plugging-mcrypt-into-php-on-mac-os-x-snow-leopard-10.6.1/">http://michaelgracie.com/2009/09/23/plugging-mcrypt-into-php-on-mac-os-x-snow-leopard-10.6.1/</a> (or, if you prefer Homebrew: <a href="http://blog.rogeriopvl.com/archives/php-mcrypt-in-snow-leopard-with-homebrew/">http://blog.rogeriopvl.com/archives/php-mcrypt-in-snow-leopard-with-homebrew/</a>.</p>

<p>The following files will be added:</p>

<ul>
<li> /usr/local/lib/libmcrypt</li>
<li> /usr/local/include/mcrypt.h</li>
<li> /usr/local/include/mutils/mcrypt.h</li>
<li> /usr/local/bin/libmcrypt-config</li>
<li> /usr/local/lib/libmcrypt.la</li>
<li> /usr/local/lib/libmcrypt.4.4.8.dylib</li>
<li> /usr/local/lib/libmcrypt.4.dylib</li>
<li> /usr/local/lib/libmcrypt.dylib</li>
<li> /usr/local/share/aclocal/libmcrypt.m4</li>
<li> /usr/local/man/man3/mcrypt.3</li>
<li> /usr/lib/php/extensions/no-debug-non-zts-20090626/mcrypt.so</li>
</ul>
</li>
<li><p>The following lines will install the latest phpMyAdmin to <em>/Library/WebServer/Documents</em> and set up <em>config.inc.php</em>. Afterwards, you will be able to access phpMyAdmin at <a href="http://localhost/phpMyAdmin"><a href="http://localhost/phpMyAdmin">http://localhost/phpMyAdmin</a></a>:</p></li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nb">cd</span> /Library/WebServer/Documents
</span><span class='line'>curl -s -L -O http://downloads.sourceforge.net/project/phpmyadmin/phpMyAdmin/<span class="sb">`</span>curl -s -L http://www.phpmyadmin.net/home_page/index.php | grep -m1 dlname |awk -F<span class="s1">&#39;Download &#39;</span> <span class="s1">&#39;{print $2}&#39;</span>|cut -d <span class="s2">&quot;&lt;&quot;</span> -f1<span class="sb">`</span>/phpMyAdmin-<span class="sb">`</span>curl -s -L http://www.phpmyadmin.net/home_page/index.php | grep -m1 dlname |awk -F<span class="s1">&#39;Download &#39;</span> <span class="s1">&#39;{print $2}&#39;</span>|cut -d <span class="s2">&quot;&lt;&quot;</span> -f1<span class="sb">`</span>-english.tar.gz
</span><span class='line'>tar zxpf <span class="sb">`</span>ls -1 phpMyAdmin*tar.gz|sort|tail -1<span class="sb">`</span>
</span><span class='line'>rm <span class="sb">`</span>ls -1 phpMyAdmin*tar.gz|sort|tail -1<span class="sb">`</span>
</span><span class='line'>mv <span class="sb">`</span>ls -d1 phpMyAdmin-*|sort|tail -1<span class="sb">`</span> phpMyAdmin
</span><span class='line'><span class="nb">cd </span>phpMyAdmin
</span><span class='line'>cp config.sample.inc.php config.inc.php
</span><span class='line'>sed -i <span class="s2">&quot;&quot;</span> <span class="s2">&quot;s/blowfish_secret\&#39;\] = \&#39;/blowfish_secret\&#39;\] = \&#39;`cat /dev/urandom | strings | grep -o &#39;[[:alnum:]]&#39; | head -n 50 | tr -d &#39;\n&#39;`/&quot;</span> config.inc.php
</span></code></pre></td></tr></table></div></figure>


<h2>Drush</h2>

<p>Drush is a helpful tool that provides a &ldquo;Drupal shell&rdquo; to speed up your Drupal development.</p>

<ul>
<li>Run the following in the Terminal to get Drush 4.2 installed in <em>/usr/local</em> and add drush to the $PATH:</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>svn co http://subversible.svn.beanstalkapp.com/modules/drush/tags/DRUPAL-7--4-2/ /usr/local/drush
</span><span class='line'><span class="nb">cd</span> /tmp
</span><span class='line'>pear download Console_Table
</span><span class='line'>tar zxvf <span class="sb">`</span>ls Console_Table-*.tgz<span class="sb">`</span> <span class="sb">`</span>ls Console_Table-*.tgz | sed -e <span class="s1">&#39;s/\.[a-z]\{3\}$//&#39;</span><span class="sb">`</span>/Table.php
</span><span class='line'>mv <span class="sb">`</span>ls Console_Table-*.tgz | sed -e <span class="s1">&#39;s/\.[a-z]\{3\}$//&#39;</span><span class="sb">`</span>/Table.php /usr/local/drush/includes/table.inc
</span><span class='line'>rm -fr Console_Table-*
</span><span class='line'>ln -s /usr/local/drush/drush /usr/local/bin/drush&lt;/code&gt;
</span></code></pre></td></tr></table></div></figure>


<h2>Virtual Hosts</h2>

<p>Now that all of the components to run a website locally are in place, it only takes a few changes to <em>~/Sites/httpd-vhosts.conf</em> to get a new local site up and running.</p>

<ul>
<li><p>Your website code should be in a directory in <em>~/Sites</em>. For the purposes of this example, the webroot will be at <em>~/Sites/thewebsite</em>.</p></li>
<li><p>You need to choose a &ldquo;domain name&rdquo; for your local site that you will use to access it in your browser. For the example, we will use &ldquo;myproject.local&rdquo;. The first thing you need to do is add a line to <em>/etc/hosts</em> to direct your &ldquo;domain name&rdquo; to your local system:</p></li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo sh -c <span class="err">&quot;</span>cat &gt;&gt; /etc/hosts <span class="s">&lt;&lt;&#39;EOF&#39;</span>
</span><span class='line'><span class="s">127.0.0.1 myproject.local</span>
</span><span class='line'><span class="s">EOF</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><p>If you have been following the rest of this guide and used a copy of <em>/etc/apache2/extra/httpd-vhosts.conf</em> in <em>~/Sites/httpd-vhosts.conf</em>, you can delete the first of the two example Virtual Hosts and edit the second one. You can also delete the <strong>ServerAdmin</strong> line as it is not necessary.</p></li>
<li><p>Change the <strong>ServerName</strong> to <strong>myproject.local</strong> (or whatever you entered into <em>/etc/hosts</em>) so Apache will respond when you visit <a href="http://myproject.local">http://myproject.local</a> in a browser.</p></li>
<li><p>Change the <strong>DocumentRoot</strong> to the path of your webroot, which in this example is <strong>/Users/fname/Sites/thewebsite</strong></p></li>
<li><p>It&rsquo;s highly recommended to set a CustomLog and an ErrorLog for each virtual host, otherwise all logged output will be in the same file for all sites. Change the line starting with <strong>CustomLog</strong> from &ldquo;dummy-host2.example.com-access_log&rdquo; to &ldquo;myproject.local-access_log&rdquo;, and for <strong>ErrorLog</strong> change &ldquo;dummy-host2.example.com-error_log&rdquo; to &ldquo;myproject.local-error_log&rdquo;</p></li>
<li><p>Save the file and reload the Apache configuration as shown in Step 6 under the Apache section, and visit <a href="http://myproject.local">http://myproject.local</a> in your browser.</p></li>
</ul>


<p>Going forward, all you have to do to add a new website is duplicate and edit the <strong>&lt;VirtualHost *:80></strong> to <strong>&lt;/VirtualHost></strong> section underneath your existing configuration, make new edits, edit <em>/etc/hosts</em> again, and reload Apache.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Alan Ivey</span></span>

      








  


<time datetime="2010-10-15T14:46:00-04:00" pubdate data-updated="true">Oct 15<span>th</span>, 2010</time>
      


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://alanthing.com/blog/2010/10/15/native-local-development-environment-os-x/" data-via="alanthing" data-counturl="http://alanthing.com/blog/2010/10/15/native-local-development-environment-os-x/" >Tweet</a>
  
  
  <div class="g-plusone" data-size="medium"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2010/08/12/dropbox-cli-centos-5-easy-way/" title="Previous Post: Dropbox CLI for CentOS 5 the easy way">&laquo; Dropbox CLI for CentOS 5 the easy way</a>
      
      
        <a class="basic-alignment right" href="/blog/2010/12/07/combined-apache-logs-for-load-balanced-web-servers/" title="Next Post: Combined Apache logs for load balanced web servers">Combined Apache logs for load balanced web servers &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/05/09/speed-up-php-on-nfs-with-turbo-realpath/">Speed Up PHP on NFS With Turbo_realpath</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/03/17/virtualbox-extension-pack-with-one-line/">VirtualBox Extension Pack With One Line</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/02/21/real-time-ruby-gem-development/">"Real-time" Ruby Gem Development</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/12/19/usable-mamp-os-x-108-mountain-lion/">Usable MAMP on OS X 10.8 Mountain Lion</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/09/04/apache-modules-on-os-x-with-homebrew/">Apache Modules on OS X With Homebrew</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Coderwall</h1>
  <ul id="cw_badges">
    <li class="loading">Status updating...</li>
  </ul>
  
  <div>
    <a href="http://coderwall.com/alanthing" target="_blank" class="cw_badge"><img
       alt="Endorse alanthing on Coderwall"
       src="http://api.coderwall.com/alanthing/endorsecount.png" /></a>
  </div>
  

  <script type="text/javascript">
    var coderwall = (function(){
      function render(options, badges){
        var fragment = '',
            t = $(options.target),
            height = 65,
            width = 65,
            index;

        for (index in badges) {
          fragment += '<a class="cw_badge"title="' + badges[index].description + '" target="_blank" href="http://coderwall.com/' + options.user + '">';
          fragment +=   '<img alt="' + badges[index].description + '" height="' + width + '" width="' + height + '" src="' + badges[index].badge + '"/>';
          fragment += '</a>';
        }

        t.html(fragment);
      }
      return {
        showBadges: function(options){
          $.ajax({
              url: 'http://coderwall.com/' + options.user + '.json?callback=?'
            , dataType: 'jsonp'
            , error: function (err) { $(options.target + ' li.loading').addClass('error').text("Error loading feed"); }
            , success: function(res) {
                render(options, res.data.badges);
            }
          });
        }
      };
    })();

    $(document).ready(function(){
      coderwall.showBadges({
        user: 'alanthing',
        target: '#cw_badges'
      });
    });
  </script>
</section>


<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/alanthing">@alanthing</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'alanthing',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Alan Ivey -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'alanthing';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://alanthing.com/blog/2010/10/15/native-local-development-environment-os-x/';
        var disqus_url = 'http://alanthing.com/blog/2010/10/15/native-local-development-environment-os-x/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
